<div id="app">

	<!--<button (click)="toggleLogin()" style="position: absolute; bottom:10px;left: 10px;">toggle</button>-->

	<div [class]="{loginPrompt: true, flipUp: true, flipUpHide: loggedIn}">
		<div>
			<div>
				ðŸ”‘ Please Login
			</div>
			<div>
				<div class="settings">
					<label for="username">Username</label>
					<input id="username" type="text" [(ngModel)]="oas.username" />

					<label for="password">Password</label>
					<input id="password" type="password" [(ngModel)]="oas.password"  />
				</div>
			</div>
			<div>
				<input id="rememberMe" type="checkbox" checked="checked">
				<label for="rememberMe">Remember My Device</label>
				<button (click)="oas.login()">Login</button>
			</div>
		</div>
	</div>

	<div [class]="{settings: true, flipUp: true, flipUpHide: !loggedIn}" style="margin: 8px;">

		<label *ngIf="oas.databases">Database</label>
		<select *ngIf="oas.databases" (change)="oas.switchDatabase()" [(ngModel)]="oas.database">
			<option *ngFor="let database of oas.databases" [value]="database.id">{{database.clientName}}</option>
		</select>

		<label *ngIf="oas.endpoints">Domains</label>
		<select *ngIf="oas.endpoints" [(ngModel)]="oas.domain">
			<option *ngFor="let domain of oas.endpoints | keyvalue">{{domain.key}}</option>
		</select>
		
		<label *ngIf="oas.endpoints">Endpoints</label>
		<select *ngIf="oas.endpoints" [(ngModel)]="oas.endpoint">
			<option *ngFor="let endpoint of oas.endpoints[oas.domain] | keyvalue">{{endpoint.key}}</option>
		</select>

		<label *ngIf="oas.endpoints">Method</label>
		<select *ngIf="oas.endpoints" [(ngModel)]="oas.method" [size]="oas.endpoints[oas.domain][oas.endpoint]?.length||1">
			<option *ngFor="let method of oas.endpoints[oas.domain][oas.endpoint]">{{method}}</option>
		</select>

		<ng-template ngFor let-v [ngForOf]="oas.varList">
			<label [title]="v.type" style="color:#FF7">{{v.name}}</label>
			<input type="text" [(ngModel)]="v.value" />
		</ng-template>

		<label *ngIf="oas.path">Path</label>
		<div *ngIf="oas.path" (click)="LoadURL()">{{oas.path}}</div>
		
	</div>

	<textarea [(ngModel)]="res" [class]="{textBody: true, flipLeft: true, flipLeftHide: !loggedIn}"></textarea>

	<div class="loadingSpinner" *ngIf="oas.loading">
		<div>
			<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 466 466">
				<path id="LP" fill="#FFFFFF" d="M200,10l 67 0c5 0,10 5,10 12l-17 156c0 0,0 10,-10 10c0 0,-18-4,-35 0c0 0,-10 0,-10-10l-17-156c0-2,1-12,10-12z"/>
				<use xlink:href="#LP" transform="rotate(72 233 233)"/>
				<use xlink:href="#LP" transform="rotate(144 233 233)"/>
				<use xlink:href="#LP" transform="rotate(216 233 233)"/>
				<use xlink:href="#LP" transform="rotate(288 233 233)"/>
			</svg>
		</div>
	</div>

</div>